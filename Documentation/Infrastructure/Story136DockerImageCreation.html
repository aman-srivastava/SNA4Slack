<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c6{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c5{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Courier New";font-style:normal}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c9{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c10{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c8{color:inherit;text-decoration:inherit}.c7{font-weight:700}.c3{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c10"><p class="c4"><span class="c5">Docker Image Creation POC</span></p><p class="c3 c4"><span class="c1"></span></p><p class="c4 c3"><span class="c1"></span></p><p class="c2"><span class="c7">Documentation: </span><span class="c9"><a class="c8" href="https://www.google.com/url?q=https://docs.docker.com/develop/develop-images/baseimages/&amp;sa=D&amp;ust=1522397214103000">https://docs.docker.com/develop/develop-images/baseimages/</a></span><span class="c1">&nbsp;</span></p><p class="c2 c3"><span class="c1"></span></p><p class="c2"><span class="c6">Published Docker Image:</span></p><p class="c2"><span class="c9"><a class="c8" href="https://www.google.com/url?q=https://hub.docker.com/r/ishandikshit/sna4slack_backend/&amp;sa=D&amp;ust=1522397214104000">https://hub.docker.com/r/ishandikshit/sna4slack_backend/</a></span><span class="c1">&nbsp;</span></p><p class="c2 c3"><span class="c1"></span></p><p class="c2"><span class="c7">Docker pull command: </span><span class="c0">docker pull ishandikshit/sna4slack_backend</span></p><p class="c2 c3"><span class="c1"></span></p><p class="c2"><span class="c6">Back End Dockerfile:</span></p><p class="c2"><span class="c0"># Use an official Python runtime as a parent image</span></p><p class="c2"><span class="c0">FROM python:2.7-slim</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0">#Set ENV</span></p><p class="c2"><span class="c0">ENV APP_HOME=./SNA4Slack_API</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0"># Set the working directory to /app</span></p><p class="c2"><span class="c0">WORKDIR $APP_HOME</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0"># Copy the current directory contents into the container at /app</span></p><p class="c2"><span class="c0">ADD . $APP_HOME</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0"># Install any needed packages specified in requirements.txt</span></p><p class="c2"><span class="c0">RUN pip install --upgrade pip</span></p><p class="c2"><span class="c0">RUN pip install -r $APP_HOME/requirements.txt</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0"># Make port 80 available to the world outside this container</span></p><p class="c2"><span class="c0">EXPOSE 80</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0"># Define environment variable</span></p><p class="c2"><span class="c0">ENV NAME sna4slack</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0"># Run app.py when the container launches</span></p><p class="c2"><span class="c0">CMD [&quot;python&quot;, &quot;./SNA4Slack_API/main.py&quot;]</span></p><p class="c2 c3"><span class="c1"></span></p><p class="c2 c3"><span class="c1"></span></p><p class="c2"><span class="c6">Front End Dockerfile:</span></p><p class="c2 c3"><span class="c1"></span></p><p class="c2"><span class="c0">FROM node:slim</span></p><p class="c2"><span class="c0">MAINTAINER Ishan Dikshit</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0">ENV APP_HOME ./</span></p><p class="c2"><span class="c0">RUN mkdir $APP_HOME</span></p><p class="c2"><span class="c0">WORKDIR $APP_HOME</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0">RUN npm install -g webpack</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0"># ADD package.json $APP_HOME/</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0">ENV NODE_ENV=production \</span></p><p class="c2"><span class="c0">&nbsp; PATH=$APP_HOME/node_modules/.bin:$PATH</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0"># RUN npm install</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0">ADD . $APP_HOME</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0"># Write the bundle.js static asset file</span></p><p class="c2"><span class="c0"># RUN npm run build</span></p><p class="c2 c3"><span class="c0"></span></p><p class="c2"><span class="c0"># Boot the server</span></p><p class="c2"><span class="c0"># CMD [&quot;npm&quot;, &quot;start&quot;]</span></p><p class="c2 c3"><span class="c1"></span></p><p class="c2 c3"><span class="c1"></span></p><p class="c2"><span class="c6">Docker - Compose.yml</span></p><p class="c2 c3"><span class="c1"></span></p><p class="c2"><span class="c0">version: &#39;2&#39;</span></p><p class="c2"><span class="c0">services:</span></p><p class="c2"><span class="c0">&nbsp; frontend:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; build: ./SNA4Slack</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; container_name: sna4slack_frontend</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; command: npm run start</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ports:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; - &#39;4000:80&#39;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; volumes:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp;- ./SNA4Slack:/sna4slack</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; environment:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; NODE_ENV: development</span></p><p class="c2"><span class="c0">&nbsp; backend:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; build: ./SNA4Slack_API</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; container_name: sna4slack_backend</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; command: python main.py</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; ports:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; - &#39;5000:5000&#39;</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; depends_on:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; - db</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; volumes:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; - ./SNA4Slack_API:/sna4slack_backend</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; - bundle:/usr/local/bundle</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; environment:</span></p><p class="c2"><span class="c0">&nbsp; &nbsp; &nbsp; PYTHON_ENV: development</span></p><p class="c2"><span class="c0">volumes:</span></p><p class="c2"><span class="c0">&nbsp; db_data:</span></p><p class="c2"><span class="c0">&nbsp; bundle:</span></p></body></html>