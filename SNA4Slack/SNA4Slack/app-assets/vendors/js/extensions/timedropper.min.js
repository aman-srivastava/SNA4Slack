!function(a){a.fn.timeDropper=function(b,c){return a(this).each(function(){var h,c=a(this),d=!1,e=!1,f=function(a){return a<10?"0"+a:a},g=a(".td-clock").length,i=null,j=a.extend({format:"h:mm a",autoswitch:!1,meridians:!1,mousewheel:!1,setCurrentTime:!0,init_animation:"fadein",primaryColor:"#237596",borderColor:"#237596",backgroundColor:"#FFF",textColor:"#1D2B36"},b);c.prop({readonly:!0}).addClass("td-input"),a("body").append('<div class="td-wrap td-n2" id="td-clock-'+g+'"><div class="td-overlay"></div><div class="td-clock td-init"><div class="td-deg td-n"><div class="td-select"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 35.4" enable-background="new 0 0 100 35.4" xml:space="preserve"><g><path fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M98.1,33C85.4,21.5,68.5,14.5,50,14.5S14.6,21.5,1.9,33"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="1.9" y1="33" x2="1.9" y2="28.6"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="1.9" y1="33" x2="6.3" y2="33"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="98.1" y1="33" x2="93.7" y2="33"/><line fill="none" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="98.1" y1="33" x2="98.1" y2="28.6"/></g></svg></div></div><div class="td-medirian"><span class="td-icon-am td-n">AM</span><span class="td-icon-pm td-n">PM</span></div><div class="td-lancette"><div></div><div></div></div><div class="td-time"><span class="on"></span>:<span></span></div></div></div>'),a("head").append("<style>#td-clock-"+g+" .td-clock {color:"+j.textColor+";background: "+j.backgroundColor+"; box-shadow: 0 0 0 1px "+j.borderColor+",0 0 0 8px rgba(0, 0, 0, 0.05); } #td-clock-"+g+" .td-clock .td-time span.on { color:"+j.primaryColor+"} #td-clock-"+g+" .td-clock:before { border-color: "+j.borderColor+"} #td-clock-"+g+" .td-select:after { box-shadow: 0 0 0 1px "+j.borderColor+" } #td-clock-"+g+" .td-clock:before,#td-clock-"+g+" .td-select:after {background: "+j.backgroundColor+";} #td-clock-"+g+" .td-lancette {border: 2px solid "+j.primaryColor+"; opacity:0.1}#td-clock-"+g+" .td-lancette div:after { background: "+j.primaryColor+";} #td-clock-"+g+" .td-bulletpoint div:after { background:"+j.primaryColor+"; opacity:0.1}</style>");var l=a("#td-clock-"+g),m=l.find(".td-overlay"),n=l.find(".td-clock");n.find("svg").attr("style","stroke:"+j.borderColor);var o=-1,p=0,q=0,t=function(){var a=n.find(".td-time span.on"),b=parseInt(a.attr("data-id"));0==a.index()?deg=Math.round(360*b/23):deg=Math.round(360*b/59),o=-1,p=deg,q=deg},u=function(a){var b=n.find(".td-time span.on"),d=b.attr("data-id");d||(d=0);var e=Math.round(23*a/360),g=Math.round(59*a/360);if(0==b.index()?(b.attr("data-id",f(e)),j.meridians&&(e>=12&&e<24?(n.find(".td-icon-pm").addClass("td-on"),n.find(".td-icon-am").removeClass("td-on")):(n.find(".td-icon-am").addClass("td-on"),n.find(".td-icon-pm").removeClass("td-on")),e>12&&(e-=12),0==e&&(e=12)),b.text(f(e))):b.attr("data-id",f(g)).text(f(g)),q=a,n.find(".td-deg").css("transform","rotate("+a+"deg)"),0==b.index()){var h=Math.round(360*e/12);n.find(".td-lancette div:last").css("transform","rotate("+h+"deg)")}else n.find(".td-lancette div:first").css("transform","rotate("+a+"deg)");var i=n.find(".td-time span:first").attr("data-id"),k=n.find(".td-time span:last").attr("data-id");if(Math.round(i)>=12&&Math.round(i)<24)var e=Math.round(i)-12,l="pm",m="PM";else var e=Math.round(i),l="am",m="AM";0==e&&(e=12);var o=j.format.replace(/\b(H)\b/g,Math.round(i)).replace(/\b(h)\b/g,Math.round(e)).replace(/\b(m)\b/g,Math.round(k)).replace(/\b(HH)\b/g,f(Math.round(i))).replace(/\b(hh)\b/g,f(Math.round(e))).replace(/\b(mm)\b/g,f(Math.round(k))).replace(/\b(a)\b/g,l).replace(/\b(A)\b/g,m);c.val(o)};/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e=!0),n.find(".td-time span").on("click",function(b){var c=a(this);n.find(".td-time span").removeClass("on"),c.addClass("on");var d=parseInt(c.attr("data-id"));0==c.index()?deg=Math.round(360*d/23):deg=Math.round(360*d/59),o=-1,p=deg,q=deg,u(deg)}),n.find(".td-deg").on("touchstart mousedown",function(b){t(),b.preventDefault(),clearInterval(h),n.find(".td-deg").removeClass("td-n"),n.find(".td-select").removeClass("td-rubber"),d=!0;var g,i,j,k,c=n.offset(),f={y:c.top+n.height()/2,x:c.left+n.width()/2},l=180/Math.PI;n.removeClass("td-rubber"),a(window).on("touchmove mousemove",function(a){1==d&&(e?move=a.originalEvent.touches[0]:move=a,g=f.y-move.pageY,i=f.x-move.pageX,j=Math.atan2(g,i)*l,j<0&&(j=360+j),o==-1&&(o=j),k=Math.floor(j-o+p),k<0?k=360+k:k>360&&(k%=360),u(k))})}),j.mousewheel&&n.on("mousewheel",function(a){a.preventDefault(),n.find(".td-deg").removeClass("td-n"),a.originalEvent.wheelDelta>0?q<=360&&(a.originalEvent.wheelDelta<=120?q++:a.originalEvent.wheelDelta>120&&(q+=20),q>360&&(q=0)):q>=0&&(a.originalEvent.wheelDelta>=-120?q--:a.originalEvent.wheelDelta<-120&&(q-=20),q<0&&(q=360)),o=-1,p=q,u(q)}),a(document).on("touchend mouseup",function(){d&&(d=!1,j.autoswitch&&(n.find(".td-time span").toggleClass("on"),n.find(".td-time span.on").click()),n.find(".td-deg").addClass("td-n"),n.find(".td-select").addClass("td-rubber"))});var v=function(a){var g,h,b=new Date,d=n.find(".td-time span:first"),e=n.find(".td-time span:last");if(c.val().length&&!j.setCurrentTime){var k,i=/\d+/g,l=c.val().split(":");l?(g=l[0].match(i),h=l[1].match(i),c.val().indexOf("am")!=-1||c.val().indexOf("AM")!=-1||c.val().indexOf("pm")!=-1||c.val().indexOf("PM")!=-1?(k=c.val().indexOf("am")!=-1||c.val().indexOf("AM")!=-1,k?12==g&&(g=0):g<13&&(g=parseInt(g)+12,24==g&&(g=0))):24==g&&(g=0)):(g=f(parseInt(d.text())?d.text():b.getHours()),h=f(parseInt(e.text())?e.text():b.getMinutes()))}else g=f(parseInt(d.text())?d.text():b.getHours()),h=f(parseInt(e.text())?e.text():b.getMinutes());d.attr("data-id",g).text(g),e.attr("data-id",h).text(h),p=Math.round(360*g/23),n.find(".td-lancette div:first").css("transform","rotate("+Math.round(360*h/59)+"deg)"),u(p),q=p,o=-1};v(),c.focus(function(a){a.preventDefault(),c.blur()}),c.click(function(a){clearInterval(i),l.removeClass("td-fadeout"),l.addClass("td-show").addClass("td-"+j.init_animation),n.css({top:c.offset().top+(c.outerHeight()-8),left:c.offset().left+c.outerWidth()/2-n.outerWidth()/2}),n.hasClass("td-init")&&(h=setInterval(function(){n.find(".td-select").addClass("td-alert"),setTimeout(function(){n.find(".td-select").removeClass("td-alert")},1e3)},2e3),n.removeClass("td-init"))}),m.click(function(){l.addClass("td-fadeout").removeClass("td-"+j.init_animation),i=setTimeout(function(){l.removeClass("td-show")},300)}),a(window).on("resize",function(){t(),n.css({top:c.offset().top+(c.outerHeight()-8),left:c.offset().left+c.outerWidth()/2-n.outerWidth()/2})})})}}(jQuery);